<link rel="stylesheet" href="/frontend/codes.css">

<!-- Professional Hero Section -->
<section style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 3rem 0; border-radius: 20px; margin-bottom: 2rem;">
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem; text-align: center;">
        <h1 style="color: #ffffff; font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
            EPG Channel Codes Database - 848+ Channels
        </h1>
        <p style="color: #b8c5d6; font-size: 1.2rem; max-width: 800px; margin: 0 auto; line-height: 1.6;">
            Comprehensive Electronic Program Guide codes database with professional channel identifiers from 40+ countries. Complete collection includes Germany (56), France (40), UK (32), Austria (7), Italy (18), Spain (17), and worldwide coverage for seamless streaming channel integration.
        </p>
    </div>
</section>

<!-- Professional Features Section -->
<section style="background: rgba(255, 255, 255, 0.02); padding: 2rem; border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 2rem;">
    <div class="row">
        <div class="col-md-4 mb-3">
            <div style="text-align: center;">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                    <i class="fa fa-search" style="color: white; font-size: 24px;"></i>
                </div>
                <h3 style="color: #ffffff; font-size: 1.2rem; margin-bottom: 0.5rem;">Instant Search</h3>
                <p style="color: #b8c5d6; font-size: 0.9rem; margin: 0;">Quick search through thousands of EPG channel codes</p>
            </div>
        </div>
        
        <div class="col-md-4 mb-3">
            <div style="text-align: center;">
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                    <i class="fa fa-filter" style="color: white; font-size: 24px;"></i>
                </div>
                <h3 style="color: #ffffff; font-size: 1.2rem; margin-bottom: 0.5rem;">Smart Filtering</h3>
                <p style="color: #b8c5d6; font-size: 0.9rem; margin: 0;">Filter by country, category, or channel type for precise results</p>
            </div>
        </div>
        
        <div class="col-md-4 mb-3">
            <div style="text-align: center;">
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                    <i class="fa fa-copy" style="color: white; font-size: 24px;"></i>
                </div>
                <h3 style="color: #ffffff; font-size: 1.2rem; margin-bottom: 0.5rem;">One-Click Copy</h3>
                <p style="color: #b8c5d6; font-size: 0.9rem; margin: 0;">Easy copy-to-clipboard functionality for quick integration</p>
            </div>
        </div>
    </div>
</section>

    
</div>

<!-- EPG Codes Search and Filter Section -->
<section class="codes-container">
    <div class="codes-header">
        <h1 class="text-white codes-section-title">EPG Channel Codes</h1>
        <p class="codes-section-subtitle">Search and browse electronic program guide codes for your IPTV channels</p>
    </div>

    <!-- Search and Filter Controls -->
    <div class="codes-controls">
        <div class="row mb-4">
            <div class="col-md-4">
                    <i class="fa fa-search search-icon"></i>
                    <input type="text" id="searchInput" class="form-control search-input" placeholder="Search channel names or codes...">
                </div>
            </div>
            <div class="col-md-4">
                <select id="countryFilter" class="form-control filter-select" onchange="handleCountrySelection(this)">
                    <option value="">All Countries</option>
                    <% countries.forEach(country => { %>
                        <option value="<%= country %>" data-url="/codes/<%= country.toLowerCase().replace(/\s+/g, '-') %>"><%= country %></option>
                    <% }); %>
                </select>
            </div>
            <div class="col-md-4">
                <select id="categoryFilter" class="form-control filter-select">
                    <option value="">All Categories</option>
                    <% categories.forEach(category => { %>
                        <option value="<%= category %>"><%= category %></option>
                    <% }); %>
                </select>
            </div>
        </div>
    </div>

    <!-- EPG Codes Table -->
    <div class="codes-table-container">
        <div class="table-responsive">
            <table class="table codes-table" id="codesTable">
                <thead>
                    <tr>
                        <th>Channel Name</th>
                        <th>EPG Code</th>
                        <th>Country</th>
                        <th>Category</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="codesTableBody">
                    <% epgCodes.forEach(channel => { %>
                        <tr data-country="<%= channel.country %>" data-category="<%= channel.category %>">
                            <td class="channel-name"><%= channel.name %></td>
                            <td class="channel-code">
                                <code><%= channel.code %></code>
                            </td>
                            <td class="channel-country">
                                <span class="country-badge"><%= channel.country %></span>
                            </td>
                            <td class="channel-category">
                                <span class="category-badge <%= channel.category.toLowerCase() %>"><%= channel.category %></span>
                            </td>
                            <td class="channel-action">
                                <button class="btn btn-copy" onclick="copyCode('<%= channel.code %>')" title="Copy EPG code">
                                    <i class="fa fa-copy"></i>
                                </button>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Results Info -->
    <div class="codes-results-info">
        <p class="text-muted text-center" id="resultsInfo">
            Showing <span id="resultCount"><%= epgCodes.length %></span> EPG codes from 40+ countries
        </p>
    </div>
</section>

<!-- Country Quick Access Section -->
<section style="background: rgba(255, 255, 255, 0.02); padding: 2rem; border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1); margin-top: 2rem;">
    <h2 style="color: #ffffff; font-size: 1.8rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center;">Popular Country Collections</h2>
    <div class="row">
        <div class="col-md-3 col-sm-6 mb-3">
            <a href="/codes/germany" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 12px; text-align: center; transition: transform 0.3s ease;">
                    <h3 style="color: #ffffff; font-size: 1.1rem; margin-bottom: 0.5rem;">🇩🇪 Germany</h3>
                    <p style="color: #ffffff; font-size: 0.9rem; margin: 0; opacity: 0.9;">56+ Channels</p>
                    <p style="color: #ffffff; font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.8;">ARD, ZDF, RTL, ProSieben, SAT.1</p>
                </div>
            </a>
        </div>
        
        <div class="col-md-3 col-sm-6 mb-3">
            <a href="/codes/france" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 1.5rem; border-radius: 12px; text-align: center; transition: transform 0.3s ease;">
                    <h3 style="color: #ffffff; font-size: 1.1rem; margin-bottom: 0.5rem;">🇫🇷 France</h3>
                    <p style="color: #ffffff; font-size: 0.9rem; margin: 0; opacity: 0.9;">40+ Channels</p>
                    <p style="color: #ffffff; font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.8;">TF1, France 2, M6, Canal+</p>
                </div>
            </a>
        </div>
        
        <div class="col-md-3 col-sm-6 mb-3">
            <a href="/codes/uk" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 1.5rem; border-radius: 12px; text-align: center; transition: transform 0.3s ease;">
                    <h3 style="color: #ffffff; font-size: 1.1rem; margin-bottom: 0.5rem;">🇬🇧 United Kingdom</h3>
                    <p style="color: #ffffff; font-size: 0.9rem; margin: 0; opacity: 0.9;">32+ Channels</p>
                    <p style="color: #ffffff; font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.8;">BBC, ITV, Channel 4, Sky</p>
                </div>
            </a>
        </div>
        
        <div class="col-md-3 col-sm-6 mb-3">
            <a href="/codes/russia" style="text-decoration: none;">
                <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 1.5rem; border-radius: 12px; text-align: center; transition: transform 0.3s ease;">
                    <h3 style="color: #ffffff; font-size: 1.1rem; margin-bottom: 0.5rem;">🇷🇺 Russia</h3>
                    <p style="color: #ffffff; font-size: 0.9rem; margin: 0; opacity: 0.9;">217+ Channels</p>
                    <p style="color: #ffffff; font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.8;">НТВ, Россия 1, Первый канал</p>
                </div>
            </a>
        </div>
    </div>
    
    <div style="text-align: center; margin-top: 1.5rem;">
        <p style="color: #b8c5d6; font-size: 0.9rem;">
            More countries available: 
            <a href="/codes/austria" style="color: #667eea;">Austria (7)</a>, 
            <a href="/codes/italy" style="color: #667eea;">Italy (18)</a>, 
            <a href="/codes/spain" style="color: #667eea;">Spain (17)</a>, 
            <a href="/codes/usa" style="color: #667eea;">USA (9)</a>, 
            <a href="/codes/georgia" style="color: #667eea;">Georgia (57)</a>, 
            and 35+ more countries
        </p>
    </div>
</section>

<script>
// Search and Filter functionality
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const countryFilter = document.getElementById('countryFilter');
    const categoryFilter = document.getElementById('categoryFilter');
    const tableBody = document.getElementById('codesTableBody');
    const resultCount = document.getElementById('resultCount');
    
    function filterTable() {
        const searchTerm = searchInput.value.toLowerCase();
        const selectedCountry = countryFilter.value;
        const selectedCategory = categoryFilter.value;
        
        const rows = tableBody.querySelectorAll('tr');
        let visibleCount = 0;
        
        rows.forEach(row => {
            const channelName = row.querySelector('.channel-name').textContent.toLowerCase();
            const channelCode = row.querySelector('.channel-code code').textContent.toLowerCase();
            const country = row.dataset.country;
            const category = row.dataset.category;
            
            const matchesSearch = channelName.includes(searchTerm) || channelCode.includes(searchTerm);
            const matchesCountry = !selectedCountry || country === selectedCountry;
            const matchesCategory = !selectedCategory || category === selectedCategory;
            
            if (matchesSearch && matchesCountry && matchesCategory) {
                row.style.display = '';
                visibleCount++;
            } else {
                row.style.display = 'none';
            }
        });
        
        resultCount.textContent = visibleCount;
    }
    
    searchInput.addEventListener('input', filterTable);
    categoryFilter.addEventListener('change', filterTable);
});

// Handle country selection - redirect to country page or filter
function handleCountrySelection(select) {
    const selectedOption = select.options[select.selectedIndex];
    const countryUrl = selectedOption.getAttribute('data-url');
    
    if (countryUrl && selectedOption.value) {
        // Show loading state
        select.style.opacity = '0.7';
        select.disabled = true;
        
        // Add a small delay for better UX
        setTimeout(() => {
            window.location.href = countryUrl;
        }, 300);
    }
}

// Copy to clipboard functionality
function copyCode(code) {
    navigator.clipboard.writeText(code).then(function() {
        // Show success feedback
        const btn = event.target.closest('.btn-copy');
        const originalIcon = btn.querySelector('i');
        originalIcon.className = 'fa fa-check';
        btn.style.background = '#28a745';
        
        setTimeout(() => {
            originalIcon.className = 'fa fa-copy';
            btn.style.background = '';
        }, 2000);
    }).catch(function(err) {
        console.error('Could not copy text: ', err);
    });
}
</script>